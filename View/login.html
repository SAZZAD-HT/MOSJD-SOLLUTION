<!DOCTYPE html>
<html>
<head>
  <title>Admin Management</title>
</head>
<body>
  <h1>Admin Management</h1>

  <button onclick="getAllAdmins()">Get All Admins</button>

  <h2>Create Admin</h2>
  <form onsubmit="event.preventDefault(); createAdmin()">
    <label for="name">Name:</label>
    <input type="text" id="name" required>
    <br>
    <label for="email">Email:</label>
    <input type="email" id="email" required>
    <br>
    <button type="submit">Create Admin</button>
  </form>

  <h2>Get Admin by ID</h2>
  <form onsubmit="event.preventDefault(); getAdminById()">
    <label for="adminId">Admin ID:</label>
    <input type="number" id="adminId" required>
    <br>
    <button type="submit">Get Admin</button>
  </form>

  <h2>Delete Admin by ID</h2>
  <form onsubmit="event.preventDefault(); deleteAdminById()">
    <label for="adminIdToDelete">Admin ID:</label>
    <input type="number" id="adminIdToDelete" required>
    <br>
    <button type="submit">Delete Admin</button>
  </form>

  <h2>Update Admin by ID</h2>
  <form onsubmit="event.preventDefault(); updateAdminById()">
    <label for="adminIdToUpdate">Admin ID:</label>
    <input type="number" id="adminIdToUpdate" required>
    <br>
    <label for="updatedName">Updated Name:</label>
    <input type="text" id="updatedName" required>
    <br>
    <label for="updatedEmail">Updated Email:</label>
    <input type="email" id="updatedEmail" required>
    <br>
    <button type="submit">Update Admin</button>
  </form>

  <script>
    const baseURL = 'http://localhost:3000/admin'; // Replace with your API base URL

    function sendRequest(method, url, data = null) {
      return new Promise((resolve, reject) => {
        const xhr = new XMLHttpRequest();
        xhr.open(method, url);
        xhr.setRequestHeader('Content-Type', 'application/json');

        xhr.onload = () => {
          if (xhr.status >= 200 && xhr.status < 300) {
            resolve(xhr.response ? JSON.parse(xhr.response) : null);
          } else {
            reject(new Error(`HTTP error: ${xhr.status}`));
          }
        };

        xhr.onerror = () => {
          reject(new Error('Network request failed'));
        };

        xhr.send(data ? JSON.stringify(data) : null);
      });
    }

    // Get all admins
    function getAllAdmins() {
      const url = `${baseURL}`;
      sendRequest('GET', url)
        .then(response => {
          console.log(response);
          // Handle the response data
        })
        .catch(error => {
          console.error(error);
          // Handle the error
        });
    }

    // Create admin
    function createAdmin() {
      const name = document.getElementById('name').value;
      const email = document.getElementById('email').value;
      const data = { name, email };

      const url = `${baseURL}/createadmin`;
      sendRequest('POST', url, data)
        .then(response => {
          console.log(response);
          // Handle the response data
        })
        .catch(error => {
          console.error(error);
          // Handle the error
        });
    }

    // Get admin by ID
    function getAdminById() {
      const adminId = document.getElementById('adminId').value;
      const url = `${baseURL}/getadmin/${adminId}`;
      sendRequest('GET', url)
        .then(response => {
          console.log(response);
          // Handle the response data
        })
        .catch(error => {
          console.error(error);
          // Handle the error
        });
    }

    // Delete admin by ID
    function deleteAdminById() {
      const adminId = document.getElementById('adminIdToDelete').value;
      const url = `${baseURL}/deleteadmin/${adminId}`;
      sendRequest('DELETE', url)
        .then(response => {
          console.log(response);
          // Handle the response data
        })
        .catch(error => {
          console.error(error);
          // Handle the error
        });
    }

    // Update admin by ID
    function updateAdminById() {
      const adminId = document.getElementById('adminIdToUpdate').value;
      const updatedName = document.getElementById('updatedName').value;
      const updatedEmail = document.getElementById('updatedEmail').value;
      const data = { name: updatedName, email: updatedEmail };

      const url = `${baseURL}/updateadmin/${adminId}`;
      sendRequest('PUT', url, data)
        .then(response => {
          console.log(response);
          // Handle the response data
        })
        .catch(error => {
          console.error(error);
          // Handle the error
        });
    }
  </script>
</body>
</html>
